<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matching game - test your memory</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Definici√≥n de la fuente y colores */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
        
        /* Simulaci√≥n de 'Platform Medium Font' usando Inter Semi-bold */
        :root {
            --color-flamingo-pink: #FF79AC;
            --color-eerie-black: #121118;
            --color-light-pink: #FFE0ED; /* Fondo inicial de los botones */
            --color-match: #D4EDDA;     /* Verde claro para acierto */
            --color-error: #F8D7DA;     /* Rojo claro para error */
            --font-platform-medium: 'Inter', sans-serif;
        }

        body {
            font-family: var(--font-platform-medium);
            background-color: white;
            color: var(--color-eerie-black);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        .text-flamingo {
            color: var(--color-flamingo-pink);
        }

        /* Estilo inicial del bot√≥n */
        .card-button {
            transition: all 0.3s ease;
            cursor: pointer;
            border-bottom: 4px solid var(--color-flamingo-pink);
            font-weight: 600; /* Medium/Semi-bold para simular Platform Medium */
            width: 100%;
            height: 50px; /* Tama√±o de bot√≥n peque√±o fijo */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            background-color: var(--color-light-pink);
            color: var(--color-eerie-black);
            margin-bottom: 0.5rem; /* Espacio entre botones */
        }
        
        /* Colores de estado del bot√≥n */
        .card-button.matched {
            background-color: var(--color-match) !important;
            border-bottom-color: #5cb85c !important;
            cursor: default;
            color: var(--color-eerie-black);
        }

        .card-button.error {
            background-color: var(--color-error) !important;
            border-bottom-color: #d9534f !important;
        }

        .card-button.selected {
            background-color: var(--color-flamingo-pink);
            color: white;
            border-bottom-color: var(--color-eerie-black);
        }

        /* Estilo para los botones de nivel */
        .level-button {
            transition: all 0.2s;
            background-color: white;
            border: 2px solid var(--color-flamingo-pink);
            color: var(--color-flamingo-pink);
        }

        .level-button.active {
            background-color: var(--color-flamingo-pink);
            color: white;
            font-weight: 600;
        }

    </style>
</head>
<body class="selection:bg-pink-200">

    <!-- Encabezado -->
    <header class="text-center mb-6 w-full max-w-lg">
        <h1 class="text-4xl font-extrabold mb-1 text-flamingo">Matching game</h1>
        <h2 class="text-xl font-light text-gray-700">test your memory</h2>
    </header>

    <!-- Selector de Nivel -->
    <div id="level-selector" class="flex flex-wrap justify-center gap-2 mb-8 p-2 bg-gray-50 rounded-lg shadow-inner max-w-4xl w-full">
        <!-- Los botones de nivel se renderizar√°n aqu√≠ -->
    </div>

    <!-- Contenedor del Juego (Dos Columnas) -->
    <div id="game-container" class="w-full max-w-4xl p-4 bg-white rounded-xl shadow-2xl border-2 border-flamingo">
        
        <p id="loading-message" class="text-center text-lg text-gray-500">Cargando Nivel 1...</p>
        
        <!-- GRID PRINCIPAL DE 2 COLUMNAS (ESPA√ëOL | INGL√âS) -->
        <div id="game-grid" class="grid grid-cols-2 gap-4 w-full" style="display: none;">
            <div id="spanish-column" class="flex flex-col">
                <!-- Botones en espa√±ol aqu√≠ -->
            </div>
            <div id="english-column" class="flex flex-col">
                <!-- Botones en ingl√©s aqu√≠ -->
            </div>
        </div>
        
        <p id="win-message" class="text-center text-2xl font-bold text-flamingo mt-4" style="display: none;">¬°Felicidades! Nivel completado. üéâ</p>
    </div>

    <!-- Contenedor de mensajes de estado -->
    <div id="status-message" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-xl transition-opacity duration-300 opacity-0 pointer-events-none z-50"></div>


    <script>
        // Mapeo de Vocabulario por Nivel (7 niveles con 8 pares cada uno)
        const VOCABULARY_LEVELS = [
            // Nivel 1: Emociones/Estados B√°sicos
            [
                { es: 'caliente', en: 'hot' },
                { es: 'aburrido', en: 'bored' },
                { es: 'fr√≠o', en: 'cold' },
                { es: 'cansado', en: 'tired' },
                { es: 'nervioso', en: 'nervous' },
                { es: 'enfermo', en: 'sick' },
                { es: 'preocupado', en: 'worried' },
                { es: 'ocupado', en: 'busy' },
            ],
            // Nivel 2: Estados Mentales/Otros
            [
                { es: 'frustrado', en: 'frustrated' },
                { es: 'preparado', en: 'prepared' },
                { es: 'confundido', en: 'confused' },
                { es: 'ordenado', en: 'organized' },
                { es: 'tranquilo', en: 'calm' },
                { es: 'desordenado', en: 'disorganized' },
                { es: 'triste', en: 'sad' },
                { es: 'roto', en: 'broken' },
            ],
            // Nivel 3: Adjetivos/Frases/Lugares 1
            [
                { es: 'divorciado', en: 'divorced' },
                { es: 'abierto', en: 'open' },
                { es: 'enojado', en: 'angry' },
                { es: 'cerrado', en: 'closed' },
                { es: 'feliz', en: 'happy' },
                { es: '¬°Empecemos!', en: "Let's get started!" },
                { es: 'el parque', en: 'park' },
                { es: 'la iglesia', en: 'church' },
            ],
            // Nivel 4: Lugares/Sustantivos 2
            [
                { es: 'el hospital', en: 'hospital' },
                { es: 'el aeropuerto', en: 'airport' },
                { es: 'la biblioteca', en: 'library' },
                { es: 'el mercado', en: 'market' },
                { es: 'la tienda', en: 'store' },
                { es: 'el carro', en: 'car' },
                { es: 'la oficina', en: 'office' },
                { es: 'el d√≥lar', en: 'dollar' },
            ],
            // Nivel 5: N√∫meros (Cientos/Miles)
            [
                { es: 'cien', en: 'one hundred' },
                { es: 'setecientos', en: 'seven hundred' },
                { es: 'doscientos', en: 'two hundred' },
                { es: 'ochocientos', en: 'eight hundred' },
                { es: 'trescientos', en: 'three hundred' },
                { es: 'novecientos', en: 'nine hundred' },
                { es: 'cuatrocientos', en: 'four hundred' },
                { es: 'mil', en: 'thousand' },
            ],
            // Nivel 6: Mixto
            [
                { es: 'quinientos', en: 'five hundred' },
                { es: 'mill√≥n', en: 'million' },
                { es: 'seiscientos', en: 'six hundred' },
                { es: 'embarazada', en: 'pregnant' },
                { es: 'enamorado', en: 'in love' },
                { es: 'los juguetes', en: 'toys' },
                { es: 'la fiesta', en: 'party' },
                { es: 'limpiar', en: 'to clean' },
            ],
            // Nivel 7: Mixto 2
            [
                { es: 'la puerta', en: 'door' },
                { es: 'la ventana', en: 'window' },
                { es: 'el ba√±o', en: 'bathroom' },
                { es: 'el supermercado', en: 'supermarket' },
                { es: 'las revistas', en: 'magazines' },
                { es: 'los domingos', en: 'on Sundays' },
                { es: 'generalmente', en: 'generally' },
                { es: 'los a√±os', en: 'years' },
            ]
        ];

        let currentLevel = 0;
        let selectedCards = [];
        let matchedCardsCount = 0;
        let isProcessing = false;

        const spanishColumn = document.getElementById('spanish-column');
        const englishColumn = document.getElementById('english-column');
        const levelSelector = document.getElementById('level-selector');
        const winMessage = document.getElementById('win-message');
        const loadingMessage = document.getElementById('loading-message');
        const gameGrid = document.getElementById('game-grid'); // Para mostrar/ocultar

        /**
         * Fisher-Yates shuffle algorithm.
         * @param {Array} array - Array to shuffle.
         * @returns {Array} Shuffled array.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        /**
         * Muestra un mensaje temporal de estado.
         * NOTA: Esta funci√≥n se mantiene, pero las llamadas para Acierto/Error/Victoria
         * de emparejamiento han sido eliminadas por solicitud del usuario.
         * @param {string} message - El mensaje a mostrar.
         * @param {string} type - Tipo de mensaje ('success', 'error', 'info').
         */
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status-message');
            statusDiv.textContent = message;

            // Limpiar clases de tipo previas
            statusDiv.classList.remove('bg-red-600', 'bg-green-600', 'bg-gray-800');
            
            if (type === 'error') {
                statusDiv.classList.add('bg-red-600');
            } else if (type === 'success') {
                statusDiv.classList.add('bg-green-600');
            } else {
                statusDiv.classList.add('bg-gray-800');
            }

            // Mostrar y luego ocultar
            statusDiv.classList.remove('opacity-0', 'pointer-events-none');
            setTimeout(() => {
                statusDiv.classList.add('opacity-0', 'pointer-events-none');
            }, 1500);
        }

        /**
         * Renderiza el selector de niveles.
         */
        function renderLevelSelector() {
            levelSelector.innerHTML = '';
            VOCABULARY_LEVELS.forEach((_, index) => {
                const button = document.createElement('button');
                button.textContent = `Nivel ${index + 1}`;
                button.className = `level-button rounded-full px-4 py-1 text-sm ${index === currentLevel ? 'active' : ''}`;
                button.onclick = () => loadLevel(index);
                levelSelector.appendChild(button);
            });
        }

        /**
         * Carga y renderiza el nivel seleccionado.
         * @param {number} levelIndex - √çndice del nivel a cargar.
         */
        function loadLevel(levelIndex) {
            if (isProcessing) return; 

            currentLevel = levelIndex;
            selectedCards = [];
            matchedCardsCount = 0;
            winMessage.style.display = 'none';
            gameGrid.style.display = 'none';
            loadingMessage.textContent = `Cargando Nivel ${levelIndex + 1}...`;
            loadingMessage.style.display = 'block';
            
            renderLevelSelector();

            const currentPairs = VOCABULARY_LEVELS[levelIndex];
            
            // Separar las palabras en dos listas
            let spanishWords = [];
            let englishWords = [];

            currentPairs.forEach((pair, index) => {
                spanishWords.push({ id: index, word: pair.es, lang: 'es' });
                englishWords.push({ id: index, word: pair.en, lang: 'en' });
            });

            // Reorganizar solo la columna en ingl√©s
            const shuffledEnglishWords = shuffleArray(englishWords);
            
            // Limpiar columnas
            spanishColumn.innerHTML = '';
            englishColumn.innerHTML = '';

            // Renderizar la columna en espa√±ol (orden fijo)
            spanishWords.forEach((card, index) => {
                const button = createCardButton(card);
                spanishColumn.appendChild(button);
            });

            // Renderizar la columna en ingl√©s (orden mezclado)
            shuffledEnglishWords.forEach((card, index) => {
                const button = createCardButton(card);
                englishColumn.appendChild(button);
            });
            
            // Mostrar la cuadr√≠cula
            setTimeout(() => { 
                loadingMessage.style.display = 'none';
                gameGrid.style.display = 'grid';
            }, 300);
        }

        /**
         * Crea y configura un bot√≥n de tarjeta.
         * @param {Object} card - Objeto con los datos de la tarjeta.
         * @returns {HTMLElement} El bot√≥n creado.
         */
        function createCardButton(card) {
            const button = document.createElement('button');
            button.textContent = card.word;
            button.className = 'card-button rounded-lg shadow-sm hover:shadow-md focus:outline-none focus:ring-4 focus:ring-pink-300';
            button.dataset.cardId = card.id;
            button.dataset.lang = card.lang;
            button.onclick = () => handleCardClick(button);
            return button;
        }

        /**
         * Maneja el clic en una tarjeta.
         * @param {HTMLElement} clickedButton - El bot√≥n que fue clicado.
         */
        async function handleCardClick(clickedButton) {
            if (isProcessing || clickedButton.classList.contains('matched') || clickedButton.classList.contains('selected')) {
                return;
            }

            // 1. Validar selecci√≥n: solo una tarjeta de cada idioma
            if (selectedCards.length === 1) {
                if (selectedCards[0].element.dataset.lang === clickedButton.dataset.lang) {
                    showStatus('Selecciona una palabra de la otra columna.', 'error'); // Se mantiene como gu√≠a de usabilidad
                    return;
                }
            }

            // 2. Seleccionar la tarjeta
            clickedButton.classList.add('selected');
            selectedCards.push({ element: clickedButton, id: clickedButton.dataset.cardId });

            if (selectedCards.length < 2) {
                return;
            }

            // 3. Procesar las dos tarjetas seleccionadas
            isProcessing = true;
            const [card1, card2] = selectedCards;

            await new Promise(resolve => setTimeout(resolve, 500)); 

            // 4. Comprobar si hay coincidencia
            if (card1.id === card2.id) {
                // Coincidencia correcta: cambia a verde y se bloquea
                card1.element.classList.remove('selected');
                card2.element.classList.remove('selected');
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                
                matchedCardsCount += 2;
                // showStatus('¬°Acierto!', 'success'); // ELIMINADO por solicitud del usuario

                // Comprobar victoria (8 pares * 2 tarjetas)
                const expectedTotalMatches = VOCABULARY_LEVELS[currentLevel].length * 2; 

                if (matchedCardsCount === expectedTotalMatches) {
                    winMessage.style.display = 'block';
                    // showStatus('¬°Nivel Completado!', 'success'); // ELIMINADO por solicitud del usuario
                }

            } else {
                // Coincidencia incorrecta: cambia a rojo y revierte
                card1.element.classList.remove('selected');
                card2.element.classList.remove('selected');
                
                card1.element.classList.add('error');
                card2.element.classList.add('error');
                // showStatus('Error. Int√©ntalo de nuevo.', 'error'); // ELIMINADO por solicitud del usuario

                // Pausa para que el usuario vea el error
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Revertir a color inicial
                card1.element.classList.remove('error');
                card2.element.classList.remove('error');
            }

            // 5. Resetear el estado
            selectedCards = [];
            isProcessing = false;
        }

        // Inicializaci√≥n
        window.onload = function() {
            renderLevelSelector();
            loadLevel(currentLevel); 
        };
    </script>
</body>
</html>
