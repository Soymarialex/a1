<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>III. Actividades / Activities</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de la fuente Inter (como requerimiento estándar) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght=400;600;800&display=swap" rel="stylesheet">
    <style>
        /* Definición de colores principales */
        :root {
            --color-flamingo-pink: #FF79AC;
            --color-eerie-black: #121118;
        }

        /* Aplicación de la fuente y estilos base */
        body {
            font-family: 'Inter', sans-serif;
            color: var(--color-eerie-black);
            background-color: #FFFFFF; /* Fondo blanco explícito */
        }
        
        /* Estilo para el título de la página */
        .title-pink {
            color: var(--color-flamingo-pink);
            font-weight: 800; /* Extra bold */
            letter-spacing: 0.05em;
        }

        /* Estilo para los campos de texto con bordes redondeados */
        .completion-input {
            width: 150px;
            padding: 3px 6px;
            border-bottom: 2px solid var(--color-eerie-black);
            border-radius: 4px;
            outline: none;
            transition: background-color 0.3s, border-color 0.3s;
            text-align: center;
        }
        
        /* Asegurar que las negritas no usen asteriscos (comportamiento estándar de HTML) */
        b, strong {
            font-weight: 700;
        }

        /* Estilo para justificación en texto informativo (cumple con el requisito) */
        .text-justified {
            text-align: justify;
        }

        /* Clase para el salto de línea en el texto */
        .text-break {
            display: inline;
        }

        .answers-list-item {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
        }
        
        @media (max-width: 640px) {
            .completion-input {
                width: 100%;
                margin: 4px 0;
            }
            .text-break {
                display: block;
            }
            .answers-list-item {
                flex-direction: column;
                gap: 0;
            }
            .completion-input[style*="width: 100px"] {
                width: 48% !important; /* Ajuste para inputs pequeños en móvil */
            }
        }
    </style>
</head>
<body class="p-4 md:p-12 min-h-screen">

    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-2xl p-6 md:p-10 border border-gray-100">

        <!-- Título -->
        <h1 class="text-4xl md:text-5xl mb-10 title-pink text-center tracking-tight">
            III. Actividades / Activities
        </h1>

        <!-- SECCIÓN A -->
        <div class="mb-12 p-4 md:p-6 rounded-xl border border-pink-100">
            <!-- INICIO: Estructura ajustada para que el enunciado siga a la letra y la letra sea más pequeña -->
            <div class="flex mb-4 items-start">
                <span class="text-xl font-bold mr-2 mt-[-1px]" style="color: var(--color-eerie-black);">a.</span>
                <p class="text-justified flex-grow">
                    Juan Manuel Ríos, el amigo argentino de Luis Cortés, está de visita en Villa Celeste. Luis Cortés les está presentando a Juan Manuel a sus vecinos. / Juan Manuel Ríos, the Argentine friend of Luis Cortés, is visiting Villa Celeste. Luis Cortés is introducing Juan Manuel to his neighbors.
                </p>
            </div>
            <!-- FIN: Estructura ajustada -->
            <p class="mb-4 text-justified">
                <strong style="color: var(--color-flamingo-pink);">Completa el diálogo siguiente con las palabras y las conjugaciones apropiadas del verbo estar.</strong> / Complete the following dialogue with the appropriate words and verb conjugations of <strong style="color: var(--color-flamingo-pink);">estar</strong>.
            </p>
            <p class="mb-6 font-semibold text-sm">
                <span class="mr-2">cansado</span> &middot; <span class="mr-2">igualmente</span> &middot; <span class="mr-2">es un placer</span> &middot; <span class="mr-2">argentino</span> &middot; <span class="mr-2">días</span> &middot; <span class="mr-2">feliz (2)</span> &middot; <span class="mr-2">estar (5)</span>
            </p>

            <div id="section-a-inputs" class="space-y-3 text-lg">
                <p>Alejandra: Buenos 1. <input type="text" id="qA1" class="completion-input">, Luis.</p>
                <p>Luis: Hola, Alejandra. ¿Cómo 2. <input type="text" id="qA2" class="completion-input">? Te presento a Juan Manuel. Él es mi amigo de Argentina.</p>
                <p>Alejandra: ¡Hola, Juan Manuel! 3. <input type="text" id="qA3" class="completion-input">.</p>
                <p>Juan Manuel: ¡4. <input type="text" id="qA4" class="completion-input">!</p>
                <p>Luisa: ¿<span class="text-break">Eres 5. <input type="text" id="qA5" class="completion-input">? ¡Qué interesante!</span></p>
                <p>Juan Manuel: Sí, mi familia y yo vivimos en Buenos Aires.</p>
                <p>Luisa: ¿Y cómo estás?</p>
                <p>Juan Manuel: Bueno [Well], 6. <input type="text" id="qA6" class="completion-input"> muy 7. <input type="text" id="qA7" class="completion-input">. <span class="text-break">Mi vuelo [flight] tardó [took] muchas horas [hours]. Pero 8. <input type="text" id="qA8" class="completion-input"> 9. <input type="text" id="qA9" class="completion-input"> porque [because] Luis es mi buen amigo y ahora [now] estoy con [with] él y su familia.</span></p>
                <p>Luis: Y Cecilia y yo 10. <input type="text" id="qA10" class="completion-input"> muy 11. <input type="text" id="qA11" class="completion-input"> porque Juan Manuel 12. <input type="text" id="qA12" class="completion-input"> de visita.</p>
            </div>
        </div>

        <!-- SECCIÓN B -->
        <div class="mb-12 p-4 md:p-6 rounded-xl border border-pink-100">
            <!-- INICIO: Estructura ajustada para que el enunciado siga a la letra y la letra sea más pequeña -->
            <div class="flex mb-4 items-start">
                <span class="text-xl font-bold mr-2 mt-[-1px]" style="color: var(--color-eerie-black);">b.</span>
                <p class="text-justified flex-grow">
                    De acuerdo a las siguientes situaciones, ¿cuál sería la emoción o la condición esperada para estas personas? / According to the following situations, what would be the expected emotion or condition for these people?
                </p>
            </div>
            <!-- FIN: Estructura ajustada -->
            <p class="mb-4 text-justified">
                <strong style="color: var(--color-flamingo-pink);">Completa las frases con la conjugación apropiada de estar y el adjetivo correspondiente a la situación.</strong> / Complete the sentences with the appropriate conjugation of <strong style="color: var(--color-flamingo-pink);">estar</strong> and the adjective corresponding to the situation.
            </p>
            <p class="mb-6 font-semibold text-sm">
                <span class="mr-2">enamorado [in love]</span> &middot; <span class="mr-2">enojado</span> &middot; <span class="mr-2">nervioso</span> &middot; <span class="mr-2">aburrido</span> &middot; <span class="mr-2">frustrado</span> &middot; <span class="mr-2">feliz</span> &middot; <span class="mr-2">cansado</span>
            </p>

            <div id="section-b-inputs" class="space-y-3 text-lg">
                <p>1. Luis Cortés trabaja muchas horas en su trabajo. Él siempre [always] <input type="text" id="qB1" class="completion-input"></p>
                
                <!-- B2 MODIFICADO -->
                <p>2. Cecilia tiene que [has to] preparar un informe financiero [financial report] en quince minutos [minutes]. Ella <input type="text" id="qB2_verb" class="completion-input" style="width: 100px;"> muy <input type="text" id="qB2_adj" class="completion-input" style="width: 100px;">.</p>
                
                <p>3. Juana está divorciada [divorced]. Ella y su ex-esposo [ex-husband] no <input type="text" id="qB3" class="completion-input"></p>
                <p>4. Mariana es muy pequeña y siempre toma los juguetes [toys] de Diana cuando están en el parque. Diana <input type="text" id="qB4" class="completion-input"></p>
                <p>5. Hay un examen en la clase a las 8:00. Los estudiantes <input type="text" id="qB5" class="completion-input"></p>
                
                <!-- B6 MODIFICADO -->
                <p>6. Erica está embarazada [pregnant]. Ella y su esposo <input type="text" id="qB6_verb" class="completion-input" style="width: 100px;"> muy <input type="text" id="qB6_adj" class="completion-input" style="width: 100px;"></p>
                
                <p>7. Alberto, un hombre de treinta y cinco años [years], vive en la casa de sus padres y tiene [has] pocos amigos. Él <input type="text" id="qB7" class="completion-input"></p>
                <p>8. Alberto también es egoísta y no ayuda a sus padres a limpiar [to clean] la casa. Sus padres <input type="text" id="qB8" class="completion-input"> con él.</p>
                <p>9. Generalmente [Generally], ¿cómo estás en una fiesta [party]? <input type="text" id="qB9" class="completion-input"></p>
            </div>
        </div>

        <!-- SECCIÓN C -->
        <div class="mb-12 p-4 md:p-6 rounded-xl border border-pink-100">
            <!-- INICIO: Estructura ajustada para que el enunciado siga a la letra y la letra sea más pequeña -->
            <div class="flex mb-4 items-start">
                <span class="text-xl font-bold mr-2 mt-[-1px]" style="color: var(--color-eerie-black);">c.</span>
                <p class="text-justified flex-grow">
                    Felipe tuvo una fiesta anoche y ahora está revisando su casa después de la fiesta. Toda la casa es un desastre. / Felipe had a party last night and is now looking over his house after the party. The whole house is a disaster.
                </p>
            </div>
            <!-- FIN: Estructura ajustada -->
            <p class="mb-4 text-justified">
                <strong style="color: var(--color-flamingo-pink);">Completa las frases con la conjugación de estar y el adjetivo de condición apropiados.</strong> / Complete the sentences with the appropriate conjugation of <strong style="color: var(--color-flamingo-pink);">estar</strong> and the appropriate adjective of condition.
            </p>
            <p class="mb-6 font-semibold text-sm">
                <span class="mr-2">abierto</span> &middot; <span class="mr-2">roto</span> &middot; <span class="mr-2">ordenado</span> &middot; <span class="mr-2">cerrado</span> &middot; <span class="mr-2">desordenado</span>
            </p>

            <div id="section-c-inputs" class="space-y-3 text-lg">
                <p>Felipe está muy preocupado y nervioso porque después de la fiesta toda la casa 1. <input type="text" id="qC1" class="completion-input"> 2. <input type="text" id="qC2" class="completion-input">. <span class="text-break">Todas las puertas [doors] 3. <input type="text" id="qC3" class="completion-input"> 4. <input type="text" id="qC4" class="completion-input">, y el televisor 5. <input type="text" id="qC5" class="completion-input"> 6. <input type="text" id="qC6" class="completion-input">.</span></p>
                <p>Las ventanas [windows] de la casa 7. <input type="text" id="qC7" class="completion-input"> 8. <input type="text" id="qC8" class="completion-input">, y hay mucho polen [pollen] en el aire. <span class="text-break">Solo el baño [bathroom] 9. <input type="text" id="qC9" class="completion-input"> 10. <input type="text" id="qC10" class="completion-input">.</span></p>
            </div>
        </div>
        
        <!-- SECCIÓN D -->
        <div class="mb-12 p-4 md:p-6 rounded-xl border border-pink-100">
            <!-- INICIO: Estructura ajustada para que el enunciado siga a la letra y la letra sea más pequeña -->
            <div class="flex mb-4 items-start">
                <span class="text-xl font-bold mr-2 mt-[-1px]" style="color: var(--color-eerie-black);">d.</span>
                <p class="text-justified flex-grow">
                    Escribe en qué lugares se pueden localizar las siguientes personas o cosas. / Write in which places the following people or things can be found.
                </p>
            </div>
            <!-- FIN: Estructura ajustada -->
            <p class="mb-6 font-semibold text-sm">
                <span class="mr-2">iglesia</span> &middot; <span class="mr-2">oficina</span> &middot; <span class="mr-2">biblioteca</span> &middot; <span class="mr-2">supermercado [supermarket]</span> &middot; <span class="mr-2">universidad</span> &middot; <span class="mr-2">hospital</span> &middot; <span class="mr-2">parque</span>
            </p>

            <div id="section-d-inputs" class="space-y-3 text-lg">
                <p>1. Las doctoras trabajan en los <input type="text" id="qD1" class="completion-input"></p>
                <p>2. Los libros y las revistas [magazines] están en la <input type="text" id="qD2" class="completion-input"></p>
                <p>3. Una secretaria ejecutiva [executive secretary] generalmente trabaja en una <input type="text" id="qD3" class="completion-input"></p>
                <p>4. Siempre compro mucha agua en el <input type="text" id="qD4" class="completion-input"></p>
                <p>5. Los profesores enseñan cursos en las <input type="text" id="qD5" class="completion-input"></p>
                <p>6. Los domingos [On Sundays] hay muchas personas en las <input type="text" id="qD6" class="completion-input"></p>
                <p>7. Los chicos corren en los <input type="text" id="qD7" class="completion-input"></p>
            </div>
        </div>

        <!-- SECCIÓN E -->
        <div class="mb-12 p-4 md:p-6 rounded-xl border border-pink-100">
            <!-- INICIO: Estructura ajustada para que el enunciado siga a la letra y la letra sea más pequeña -->
            <div class="flex mb-4 items-start">
                <span class="text-xl font-bold mr-2 mt-[-1px]" style="color: var(--color-eerie-black);">e.</span>
                <p class="text-justified flex-grow">
                    Escribe los siguientes años en español. / Write the following years in Spanish.
                </p>
            </div>
            <!-- FIN: Estructura ajustada -->
            
            <div id="section-e-inputs" class="space-y-3 text-lg">
                <p>1. 1886 <input type="text" id="qE1" class="completion-input w-full md:w-3/5"></p>
                <p>2. 2019 <input type="text" id="qE2" class="completion-input w-full md:w-3/5"></p>
                <p>3. 1605 <input type="text" id="qE3" class="completion-input w-full md:w-3/5"></p>
                <p>4. 319 A.D. <input type="text" id="qE4" class="completion-input w-full md:w-3/5"></p>
                <p>5. 711 B.C. <input type="text" id="qE5" class="completion-input w-full md:w-3/5"></p>
                <p>6. 1942 <input type="text" id="qE6" class="completion-input w-full md:w-3/5"></p>
                <p>7. 2034 <input type="text" id="qE7" class="completion-input w-full md:w-3/5"></p>
            </div>
        </div>
        
        <!-- Botón de Respuestas y Contenedor de Respuestas (IV. Section) -->
        <div class="mt-10 text-center">
            <!-- Botón para mostrar/ocultar respuestas, con el color y texto solicitados -->
            <button id="toggle-answers-button" 
                    class="text-white font-bold py-3 px-8 rounded-lg transition duration-300 shadow-md"
                    style="background-color: var(--color-flamingo-pink);">
                IV. Respuestas correctas / Correct Answers
            </button>
            
            <p id="feedback-message" class="mt-4 text-lg font-semibold hidden"></p>
            
            <!-- Contenedor de Respuestas, oculto por defecto -->
            <div id="correct-answers-container" class="mt-6 p-6 border border-pink-300 bg-pink-50 rounded-xl text-left hidden">
                <h3 class="text-xl font-bold mb-4" style="color: var(--color-eerie-black);">IV. Respuestas correctas / Correct Answers</h3>
                
                <div class="space-y-4 text-base">
                    <!-- Sección a. -->
                    <div>
                        <p class="font-semibold mb-1">a.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 ml-4">
                            <p>1. días</p><p>7. cansado</p>
                            <p>2. estás</p><p>8. estoy</p>
                            <p>3. Es un placer</p><p>9. feliz</p>
                            <p>4. Igualmente</p><p>10. estamos</p>
                            <p>5. argentino</p><p>11. felices</p>
                            <p>6. Estoy</p><p>12. está</p>
                        </div>
                    </div>
                    
                    <!-- Sección b. -->
                    <div>
                        <p class="font-semibold mb-1">b.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 ml-4">
                            <p>1. está cansado</p><p>6. están muy felices</p>
                            <p>2. está muy nerviosa</p><p>7. está aburrido / está frustrado</p>
                            <p>3. están enamorados</p><p>8. están enojados / están frustrados</p>
                            <p>4. está frustrada / está enojada</p><p>9. Estoy feliz</p>
                            <p>5. están nerviosos</p>
                        </div>
                    </div>
                    
                    <!-- Sección c. -->
                    <div>
                        <p class="font-semibold mb-1">c.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 ml-4">
                            <p>1. está</p><p>6. roto</p>
                            <p>2. desordenada</p><p>7. están</p>
                            <p>3. están</p><p>8. abiertas</p>
                            <p>4. abiertas / cerradas</p><p>9. está</p>
                            <p>5. está</p><p>10. ordenado</p>
                        </div>
                    </div>

                    <!-- Sección d. -->
                    <div>
                        <p class="font-semibold mb-1">d.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 ml-4">
                            <p>1. hospitales</p><p>5. universidades</p>
                            <p>2. biblioteca</p><p>6. iglesias</p>
                            <p>3. oficina</p><p>7. parques</p>
                            <p>4. supermercado</p>
                        </div>
                    </div>
                    
                    <!-- Sección e. -->
                    <div>
                        <p class="font-semibold mb-1">e.</p>
                        <div class="grid grid-cols-1 gap-y-1 ml-4">
                            <p>1. mil ochocientos ochenta y seis</p>
                            <p>2. dos mil diecinueve</p>
                            <p>3. mil seiscientos cinco</p>
                            <p>4. trescientos diecinueve después de Cristo</p>
                            <p>5. setecientos once antes de Cristo</p>
                            <p>6. mil novecientos cuarenta y dos</p>
                            <p>7. dos mil treinta y cuatro</p>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Respuestas correctas (actualizadas para los nuevos IDs qB2_verb, qB2_adj, etc.)
            const ANSWERS = {
                // SECCIÓN A
                'qA1': 'días', 'qA2': 'estás', 'qA3': 'Es un placer', 'qA4': 'Igualmente', 'qA5': 'argentino',
                'qA6': 'Estoy', 'qA7': 'cansado', 'qA8': 'estoy', 'qA9': 'feliz', 'qA10': 'estamos',
                'qA11': 'felices', 'qA12': 'está',

                // SECCIÓN B (Modificadas B2 y B6 para inputs separados)
                'qB1': 'está cansado', 
                'qB2_verb': 'está', // NUEVO: solo el verbo
                'qB2_adj': 'nerviosa', // NUEVO: solo el adjetivo
                'qB3': 'están enamorados', 
                'qB4': ['está frustrada', 'está enojada'], 
                'qB5': 'están nerviosos',
                'qB6_verb': 'están', // NUEVO: solo el verbo
                'qB6_adj': 'felices', // NUEVO: solo el adjetivo
                'qB7': ['está aburrido', 'está frustrado'],
                'qB8': ['están enojados', 'están frustrados'], 
                'qB9': 'estoy feliz',
                
                // SECCIÓN C
                'qC1': 'está', 'qC2': 'desordenada', 'qC3': 'están', 'qC4': ['abiertas', 'cerradas'],
                'qC5': 'está', 'qC6': 'roto', 'qC7': 'están', 'qC8': 'abiertas', 'qC9': 'está', 'qC10': 'ordenado',

                // SECCIÓN D
                'qD1': 'hospitales', 'qD2': 'biblioteca', 'qD3': 'oficina', 'qD4': 'supermercado',
                'qD5': 'universidades', 'qD6': 'iglesias', 'qD7': 'parques',

                // SECCIÓN E
                'qE1': 'mil ochocientos ochenta y seis', 'qE2': 'dos mil diecinueve', 'qE3': 'mil seiscientos cinco',
                'qE4': 'trescientos diecinueve después de Cristo', 'qE5': 'setecientos once antes de Cristo',
                'qE6': 'mil novecientos cuarenta y dos', 'qE7': 'dos mil treinta y cuatro',
            };

            const inputs = Array.from(document.querySelectorAll('.completion-input'));
            const toggleButton = document.getElementById('toggle-answers-button');
            const answersContainer = document.getElementById('correct-answers-container');
            const feedbackMessage = document.getElementById('feedback-message'); 

            // Función de sanitización y normalización
            const normalize = (text) => {
                // Eliminar tildes/acentos y convertir a minúsculas para flexibilidad en la respuesta
                return text.trim().toLowerCase()
                           .normalize("NFD").replace(/[\u0300-\u036f]/g, ""); 
            };

            const verifyInput = (input) => {
                const id = input.id;
                const userAnswer = normalize(input.value);
                const correctAnswer = ANSWERS[id];

                // Limpiar clases de fondo previas
                input.classList.remove('bg-green-100', 'bg-red-100');

                // Si el campo está vacío, no colorear
                if (userAnswer === '') {
                    return false;
                }
                
                // Si no hay una respuesta esperada para este ID (debería existir si está en la lista de inputs)
                if (!correctAnswer) {
                    return false;
                }

                let isCorrect = false;

                if (Array.isArray(correctAnswer)) {
                    // Si hay múltiples respuestas posibles (ej. b4, b7, b8)
                    isCorrect = correctAnswer.some(answer => normalize(answer) === userAnswer);
                } else {
                    // Si es una única respuesta
                    isCorrect = normalize(correctAnswer) === userAnswer;
                }

                if (isCorrect) {
                    input.classList.add('bg-green-100');
                    // Deshabilitar solo si está correcto
                    input.disabled = true; 
                } else {
                    input.classList.add('bg-red-100');
                }

                return isCorrect;
            };

            const moveToNextInput = (currentIndex) => {
                let nextInput = null;
                let nextIndex = currentIndex + 1;
                
                // Buscar el siguiente input que no esté deshabilitado
                while (nextIndex < inputs.length) {
                    const candidateInput = inputs[nextIndex];
                    if (!candidateInput.disabled) {
                        nextInput = candidateInput;
                        break;
                    }
                    nextIndex++;
                }

                if (nextInput) {
                    nextInput.focus();
                } else {
                    // Si no hay más campos habilitados, enfocar el botón de toggle
                    toggleButton.focus();
                }
            };

            const handleKeyDown = (event) => {
                // Verificar si se presionó la tecla Enter
                if (event.key === 'Enter') {
                    event.preventDefault(); // Evitar el comportamiento predeterminado
                    
                    const currentInput = event.target;
                    const currentIndex = inputs.indexOf(currentInput);

                    if (currentIndex !== -1) {
                        verifyInput(currentInput);
                        moveToNextInput(currentIndex);
                    }
                }
            };

            // Función para mostrar/ocultar las respuestas
            const toggleAnswers = () => {
                answersContainer.classList.toggle('hidden');
                
                if (answersContainer.classList.contains('hidden')) {
                    toggleButton.textContent = 'IV. Respuestas correctas / Correct Answers';
                } else {
                    toggleButton.textContent = 'Ocultar Respuestas / Hide Answers';
                }
            };


            // Asignar listeners
            inputs.forEach(input => {
                input.addEventListener('keydown', handleKeyDown);
            });
            
            toggleButton.addEventListener('click', toggleAnswers);
            
            // Enfocar el primer input al cargar la página
            if (inputs.length > 0) {
                inputs[0].focus();
            }
        });
    </script>
</body>
</html>
